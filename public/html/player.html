<script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

<input type="file" id="files" name="files[]" multiple />
<output id="list"></output>

<audio controls="controls" autoplay="autoplay" id="player">
    <source src="http://webaudioapi.com/samples/audio-tag/chrono.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
</audio>

<script>

    console.log("outer");
    $( document ).ready(function() {


        // from http://www.html5rocks.com/en/tutorials/file/dndfiles/
        // Check for the various File API support.
        if (window.File && window.FileReader && window.FileList && window.Blob) {
            // Great success! All the File APIs are supported.
        } else {
            alert('The File APIs are not fully supported in this browser.');
        }


//
//        function handleFileSelect(evt) {
//            var files = evt.target.files; // FileList object
//
//            // files is a FileList of File objects. List some properties.
//            var output = [];
//            for (var i = 0, f; f = files[i]; i++) {
//                output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
//                        f.size, ' bytes, last modified: ',
//                        f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
//                        '</li>');
//            }
//            document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
//        }
//
//        document.getElementById('files').addEventListener('change', handleFileSelect, false);
//


        $("#files").change(function(e){
            var file = e.currentTarget.files[0];

            $("#filename").text(file.name);
            $("#filetype").text(file.type);
            $("#filesize").text(file.size);

            objectUrl = URL.createObjectURL(file);
            $("#player").prop("src", objectUrl);
        });



        var player = $('#player').get(0);
        player.loop = true;
    })
</script>